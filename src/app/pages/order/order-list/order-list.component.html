<div class="account-layout">
  <app-account-sidebar></app-account-sidebar>

  <div class="account-content">
    <div *ngIf="loading" class="text-center my-4">Loading orders...</div>
    <div *ngIf="!loading && orders.length === 0" class="text-center text-muted">No orders found.</div>
    
    <div
      *ngFor="let order of orders"
      class="order-card"
      (click)="goToOrderDetail(order.orderId)">
      
      <div class="order-header">
        <div class="status-section">
          <span class="badge badge-info">{{ order.paymentMethod }}</span>
          <span class="badge" [ngClass]="{
            'badge-warning': order.paymentStatus === 'COD',
            'badge-success': order.paymentStatus === 'Paid',
            'badge-danger': order.status === 'Failed'
          }">{{ order.paymentStatus }}</span>
          <span class="order-id">Order #{{ order.orderId }}</span>
        </div>
        <div class="delivery-status">
          <i class="bi bi-truck"></i>
          {{ order.deliveryStatus }}
        </div>
      </div>

      <div class="order-items">
        <div *ngFor="let item of order.items" class="item-row">
          <div class="item-image">
            <img [src]="item.primaryImageUrl || 'assets/placeholder-image.jpg'"
                 [alt]="item.productName"
                 class="product-thumb">
          </div>
          <div class="item-details">
            <strong>{{ item.productName }}</strong>
            <div class="item-meta">
              <span class="quantity">x{{ item.quantity }}</span>
              <span class="price">RM {{ item.price.toFixed(2) }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="order-footer">
        <div class="total">
          <span class="total-label">Total:</span>
          <span class="total-amount">RM {{ getOrderTotal(order) }}</span>
        </div>
        <button class="btn-track">Track Order</button>
      </div>
    </div>
  </div>
</div>



